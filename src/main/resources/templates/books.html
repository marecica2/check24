<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Kredite24 Bookstore</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
</head>
<body>
<nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
    <a class="navbar-brand" href="#">Books</a>
</nav>

<main role="main" class="container">
    List of Books
    <div class="result">

    </div>
</main>

<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/3.1.0/mustache.min.js"></script>

<script>
    function openDetails(id) {
        window.location.href = `/task/books/${id}/details`;
    }

    $.get("/api/books", function (books) {
        var template = `
        {{#books}}
        <div class="row" style="margin: 10px; padding: 20px; background: #fafafa">
            <div class="col-md-2"><img src="{{image}}" alt="{{name}}" height="200"/></div>
            <div class="col-md-6">
                <p>{{name}}</p>
                <p><strong>{{price}}</strong></p>
            </div>
            <div class="col-md-4 "><div class="pull-right">
            <button
                type="button"
                class="btn btn-primary"
                onclick="openDetails('{{id}}')">
                More
            </button>
            </div>
            </div>
        </div>
        {{/books}}`;
        $(".result").html(Mustache.render(template, {books}));
    });
</script>
</body>
</html>
